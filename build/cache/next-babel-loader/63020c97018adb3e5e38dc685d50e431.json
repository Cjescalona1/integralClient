{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useState } from \"react\";\nimport { Spinner, FormGroup, Label, Input, Button, Table } from \"reactstrap\";\nimport ReactDatePicker from \"react-datepicker\";\nimport CsvDownload from 'react-json-to-csv';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function TimeFetch() {\n  var _useState = useState(''),\n      val = _useState[0],\n      setval = _useState[1];\n\n  var _useState2 = useState(''),\n      data = _useState2[0],\n      setdata = _useState2[1];\n\n  var _useState3 = useState(''),\n      user = _useState3[0],\n      setuser = _useState3[1];\n\n  var _useState4 = useState(false),\n      band = _useState4[0],\n      setBand = _useState4[1];\n\n  var URL = \" \";\n  var d = new Date();\n  var ed = new Date();\n  d.setDate(d.getDate() - 6);\n  ed.setDate(ed.getMinutes() - 1);\n\n  var _useState5 = useState(new Date()),\n      startDate = _useState5[0],\n      setStartDate = _useState5[1];\n\n  var _useState6 = useState(new Date()),\n      endDate = _useState6[0],\n      setEndDate = _useState6[1];\n\n  function changeInput(inp) {\n    setdata(inp);\n  }\n\n  function changeUser(inp) {\n    setuser(inp);\n    setuser(inp);\n  }\n\n  function fetchCall() {\n    return _fetchCall.apply(this, arguments);\n  }\n\n  function _fetchCall() {\n    _fetchCall = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setBand(true);\n\n              if (user !== undefined) {\n                URL = \"http://localhost:9000/timeFetch?\";\n                URL = URL + \"query=\".concat(data);\n                URL = URL + \"&from=\".concat(user);\n                URL = URL + \"&date1=\".concat(startDate.toISOString());\n                URL = URL + \"&date2=\".concat(endDate.toISOString());\n              }\n\n              _context.next = 4;\n              return fetch(URL, {\n                method: 'get'\n              }).then(function (res) {\n                return res.json();\n              }).then(function (res) {\n                return setval(res);\n              })[\"catch\"](function (e) {\n                console.log(e);\n              });\n\n            case 4:\n              setBand(false);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchCall.apply(this, arguments);\n  }\n\n  var _useState7 = useState(new Date()),\n      startDate2 = _useState7[0],\n      setStartDate2 = _useState7[1];\n\n  var _useState8 = useState(null),\n      endDate2 = _useState8[0],\n      setEndDate2 = _useState8[1];\n\n  var onChange = function onChange(dates) {\n    var _dates = _slicedToArray(dates, 2),\n        start = _dates[0],\n        end = _dates[1];\n\n    setStartDate(start);\n    setEndDate(end);\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"center\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        children: \"Consulta de Tiempo\"\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        children: [\"Consulta asociada a un cojunto de palabras incluyendo el lapso a consultar limitando fecha de inicio y final en la misma.\", /*#__PURE__*/_jsx(\"br\", {}), \"Esta debe estar dentro de la ultima semana a la fecha de consulta.\"]\n      }), /*#__PURE__*/_jsx(\"form\", {\n        children: /*#__PURE__*/_jsxs(FormGroup, {\n          children: [/*#__PURE__*/_jsxs(Label, {\n            className: \"mt-2\",\n            children: [\" \", /*#__PURE__*/_jsx(\"h5\", {\n              children: \" Valores de Consuta \"\n            }), \" \"]\n          }), /*#__PURE__*/_jsx(Input, {\n            type: \"text\",\n            name: \"inp\",\n            value: data,\n            onChange: function onChange(e) {\n              changeInput(e.target.value);\n            },\n            children: \" \"\n          }), /*#__PURE__*/_jsxs(Label, {\n            className: \"mt-3\",\n            children: [\" \", /*#__PURE__*/_jsx(\"h5\", {\n              children: \" Usuario \"\n            }), \" \"]\n          }), /*#__PURE__*/_jsx(Input, {\n            type: \"text\",\n            name: \"name\",\n            value: user,\n            onChange: function onChange(e) {\n              changeUser(e.target.value);\n            },\n            children: \" \"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"row mt-4 \",\n            children: /*#__PURE__*/_jsx(ReactDatePicker, {\n              selected: startDate,\n              onChange: onChange,\n              startDate: startDate,\n              endDate: endDate,\n              selectsRange: true,\n              inline: true,\n              minDate: d,\n              maxDate: new Date()\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"App\",\n        children: /*#__PURE__*/_jsxs(\"header\", {\n          className: \"App-header\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"buttons\",\n            children: [/*#__PURE__*/_jsx(Button, {\n              disabled: band,\n              onClick: function onClick() {\n                fetchCall();\n              },\n              children: \"Buscar\"\n            }), val.data && /*#__PURE__*/_jsx(CsvDownload, {\n              data: val.data,\n              className: \"migButton\",\n              children: \" Migrar\"\n            })]\n          }), /*#__PURE__*/_jsx(\"ol\", {\n            className: \"ol-res\",\n            children: val ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsxs(Table, {\n                children: [/*#__PURE__*/_jsx(\"thead\", {\n                  children: /*#__PURE__*/_jsxs(\"tr\", {\n                    children: [\" \", /*#__PURE__*/_jsx(\"th\", {\n                      children: \"Tweets\"\n                    }), \" \"]\n                  })\n                }), /*#__PURE__*/_jsx(\"tbody\", {\n                  children: val.data.map(function (element, index) {\n                    return /*#__PURE__*/_jsxs(\"tr\", {\n                      children: [\" \", /*#__PURE__*/_jsx(\"td\", {\n                        children: element.text\n                      })]\n                    }, index);\n                  })\n                })]\n              })\n            }) : /*#__PURE__*/_jsx(_Fragment, {\n              children: band ? /*#__PURE__*/_jsx(Spinner, {\n                children: \"Loading...\"\n              }) : /*#__PURE__*/_jsx(_Fragment, {})\n            })\n          })]\n        })\n      })]\n    })\n  });\n}\n;","map":null,"metadata":{},"sourceType":"module"}