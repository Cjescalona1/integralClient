{"ast":null,"code":"import { useState } from \"react\";\nimport { Spinner, FormGroup, Label, Input, Button, Table } from \"reactstrap\";\nimport ReactDatePicker from \"react-datepicker\";\nimport CsvDownload from 'react-json-to-csv';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function TimeFetch() {\n  const {\n    0: val,\n    1: setval\n  } = useState('');\n  const {\n    0: data,\n    1: setdata\n  } = useState('');\n  const {\n    0: user,\n    1: setuser\n  } = useState('');\n  const {\n    0: band,\n    1: setBand\n  } = useState(false);\n  let URL = \" \";\n  var d = new Date();\n  var ed = new Date();\n  d.setDate(d.getDate() - 6);\n  ed.setDate(ed.getMinutes() - 1);\n  const {\n    0: startDate,\n    1: setStartDate\n  } = useState(new Date());\n  const {\n    0: endDate,\n    1: setEndDate\n  } = useState(new Date());\n\n  function changeInput(inp) {\n    setdata(inp);\n  }\n\n  function changeUser(inp) {\n    setuser(inp);\n    setuser(inp);\n  }\n\n  async function fetchCall() {\n    setBand(true);\n\n    if (user !== undefined) {\n      URL = `http://localhost:9000/timeFetch?`;\n      URL = URL + `query=${data}`;\n      URL = URL + `&from=${user}`;\n      URL = URL + `&date1=${startDate.toISOString()}`;\n      URL = URL + `&date2=${endDate.toISOString()}`;\n    }\n\n    await fetch(URL, {\n      method: 'get'\n    }).then(res => res.json()).then(res => setval(res)).catch(e => {\n      console.log(e);\n    });\n    setBand(false);\n  }\n\n  const {\n    0: startDate2,\n    1: setStartDate2\n  } = useState(new Date());\n  const {\n    0: endDate2,\n    1: setEndDate2\n  } = useState(null);\n\n  const onChange = dates => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"center\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        children: \"Consulta de Tiempo\"\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        children: [\"Consulta asociada a un cojunto de palabras incluyendo el lapso a consultar limitando fecha de inicio y final en la misma.\", /*#__PURE__*/_jsx(\"br\", {}), \"Esta debe estar dentro de la ultima semana a la fecha de consulta.\"]\n      }), /*#__PURE__*/_jsx(\"form\", {\n        children: /*#__PURE__*/_jsxs(FormGroup, {\n          children: [/*#__PURE__*/_jsxs(Label, {\n            className: \"mt-2\",\n            children: [\" \", /*#__PURE__*/_jsx(\"h5\", {\n              children: \" Valores de Consuta \"\n            }), \" \"]\n          }), /*#__PURE__*/_jsx(Input, {\n            type: \"text\",\n            name: \"inp\",\n            value: data,\n            onChange: e => {\n              changeInput(e.target.value);\n            },\n            children: \" \"\n          }), /*#__PURE__*/_jsxs(Label, {\n            className: \"mt-3\",\n            children: [\" \", /*#__PURE__*/_jsx(\"h5\", {\n              children: \" Usuario \"\n            }), \" \"]\n          }), /*#__PURE__*/_jsx(Input, {\n            type: \"text\",\n            name: \"name\",\n            value: user,\n            onChange: e => {\n              changeUser(e.target.value);\n            },\n            children: \" \"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"row mt-4 \",\n            children: /*#__PURE__*/_jsx(ReactDatePicker, {\n              selected: startDate,\n              onChange: onChange,\n              startDate: startDate,\n              endDate: endDate,\n              selectsRange: true,\n              inline: true,\n              minDate: d,\n              maxDate: new Date()\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"App\",\n        children: /*#__PURE__*/_jsxs(\"header\", {\n          className: \"App-header\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"buttons\",\n            children: [/*#__PURE__*/_jsx(Button, {\n              disabled: band,\n              onClick: () => {\n                fetchCall();\n              },\n              children: \"Buscar\"\n            }), val.data && /*#__PURE__*/_jsx(CsvDownload, {\n              data: val.data,\n              className: \"migButton\",\n              children: \" Migrar\"\n            })]\n          }), /*#__PURE__*/_jsx(\"ol\", {\n            className: \"ol-res\",\n            children: val ? /*#__PURE__*/_jsx(_Fragment, {\n              children: /*#__PURE__*/_jsxs(Table, {\n                children: [/*#__PURE__*/_jsx(\"thead\", {\n                  children: /*#__PURE__*/_jsxs(\"tr\", {\n                    children: [\" \", /*#__PURE__*/_jsx(\"th\", {\n                      children: \"Tweets\"\n                    }), \" \"]\n                  })\n                }), /*#__PURE__*/_jsx(\"tbody\", {\n                  children: val.data.map((element, index) => /*#__PURE__*/_jsxs(\"tr\", {\n                    children: [\" \", /*#__PURE__*/_jsx(\"td\", {\n                      children: element.text\n                    })]\n                  }, index))\n                })]\n              })\n            }) : /*#__PURE__*/_jsx(_Fragment, {\n              children: band ? /*#__PURE__*/_jsx(Spinner, {\n                children: \"Loading...\"\n              }) : /*#__PURE__*/_jsx(_Fragment, {})\n            })\n          })]\n        })\n      })]\n    })\n  });\n}\n;","map":null,"metadata":{},"sourceType":"module"}